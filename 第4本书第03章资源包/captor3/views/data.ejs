<!Doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>处理返回数据</title>
        <style>
        #box{
               width:300px;
               height: 300px;
               background:#ddd;
        }
        
        
        </style>
    </head>


    <body>

        <h3>处理返回数据</h3>
        <button>点击发送Ajax</button>
        <button>点击发送Ajax的Json数据</button>
        <div id="box"></div>
        <ul id="list">
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <script>
              var btn=document.querySelectorAll('button');
              var box=document.querySelector('#box');
              var li=document.querySelectorAll('li');
              btn[0].onclick=function() {

                var xhr= new XMLHttpRequest();
               

                xhr.onreadystatechange=function() {

                    if(xhr.readyState==4 && xhr.status==200) {
                           
                           box.innerHTML=xhr.responseText;

                    }
                }


                xhr.open('GET','/getdata',true);
                xhr.send();
              }
        
              btn[1].onclick=function() {

            var xhr= new XMLHttpRequest();
           

               xhr.onreadystatechange=function() {

             if(xhr.readyState==4 && xhr.status==200) {
           
             // box.innerHTML=xhr.responseText;
                  console.log(xhr.responseText);
                  console.log(typeof xhr.responseText);  
                  
                  var obj=JSON.parse(xhr.responseText);
                       console.log(obj);
                     li[0].innerHTML=obj.username;
                     li[1].innerHTML=obj.age;
                     li[2].innerHTML=obj.sex;
            }
         } 
           xhr.open('GET','/getJson',true);
             xhr.send();
}
        
        </script>
        </body>
</html>

